
<style type="text/css">
    body {
        font-family: "cascadia code", 幼圆, 宋体;
    }
    code {
        color: burlywood;
    }
    .red_font {
        color: crimson;
    }
    .yellow_font {
        color: orange;
    }
</style>

## 目录

- [目录](#目录)
- [字符串](#字符串)
  - [转义序列](#转义序列)
  - [字符串合并](#字符串合并)
  - [f字符串](#f字符串)
    - [转换字段](#转换字段)
    - [附加格式说明符](#附加格式说明符)
- [数值](#数值)
  - [整数字面量](#整数字面量)
  - [浮点数字面量](#浮点数字面量)
  - [虚数字面量](#虚数字面量)

## 字符串

字符串字面量以`'`或`"`或`'''`或`"""`括起,字符串前可以加前缀.

默认不加前缀会生成一个`str`的实例:
```python
val = "abc"
```

使用前缀`b`或`B`将生成`bytes`实例(字节串).字节串只能包含ASCII字符,字节串数值大于等于128时,必须使用转义表示.

```python
val = b'python\xe8\xaf\xad\xe8\xa8\x80'
print(type(val))
print(val.decode())
```

```
<class 'bytes'>
python语言
```

原始字符串(字节串)字面量需要加前缀`r`或`R`.

前缀为`f`或`F`的字符串称为格式字符串.`f`可与`r`连用,但不能与`b`或`u`连用.

### 转义序列

- `\<newline>`:行拼接,忽略`\`和换行符
- `\\`:`\`
- `\'`:`'`
- `\"`:`"`
- `\a`:响铃`BEL`
- `\b`:退格符`BS`
- `\f`:换页符`FF`
- `\n`:换行符`LF`
- `\r`:回车符`CR`
- `\t`:水平制表符`TAB`
- `\v`:垂直制表符`VT`
- `\ooo`:八进制数`ooo`字符
- `\xhh`:十六进制数`hh`字符
- `\N{name}`:Unicode数据库中名为`name`的字符
- `\uxxxx`:16位十六进制数`xxxx`码位的字符
- `\Uxxxxxxxx`:32位十六进制数`xxxxxxxx`码位的字符

### 字符串合并

由空白符(包括换行符)间隔的两个相邻的字符串字面量将合并.

```python
val = "hello, " 'world'
print(val)
```

```
hello, world
```

### f字符串

格式字符串字面值或称`f-string`是标注了`f`或`F`前缀的字符串字面值.

字符串内的`{<var>}`中的`<var>`将会转换为字符串并插值其中.

`{{`将会被解释为一个`{`,`}}`将被解释为一个`}`.

```python
val = 114514
print(f'val = {val}, {{}} can be used.')
```

```
val = 114514, {} can be used.
```

当`{}`内包含`=`时,将会输出`表达式文本`,`'='`,`求值结果`,`=`左右的空格将会保留.`=`默认调用表达式的`repr()`.指定了格式时,默认调用表达式的`str()`,除非声明了转换字段`!r`.

```python
val = 114514
print(f'{val = !r}')
```

```
val = 114514
```

#### 转换字段

转换字段定义表达式使用何种函数转换.

f字符串先对`!`转换符求值后,再使用`format()`格式化.

也就是说,若没有定义`!`转换符,默认使用`__format__(format_spec)`,其中`format_spec`为`:`后面的内容.  
若定义了`!`转换符,则首先对其求值,返回的必定是字符串,之后对该字符串调用`str_obj.__format__(format_spec)`,其中`format_spec`为`:`后面的内容

可使用的`!`转换字段如下:

- 未定义则使用`obj.__format__('')`转换,`object`的`__format__()`默认返回`str(self)`
- `!r`表示使用`repr()`转换.
- `!s`表示使用`str()`转换.
- `!a`表示使用`ascii()`转换.

```python
val = 'python'
print(f'{val!r} programming')
print(f'{val} programming')
```

```
'python' programming
python programming
```

#### 附加格式说明符

`:`后面是附加附加格式说明符.附加格式说明符使用`format()`进行格式化.

例如:
```python
val = 10 / 3
print(f'val = {val:.3f}') # val = 3.333
```
相当于调用了`format(val, '.3f')`并将返回值插值于`{}`位置.而`format(val, '.3f')`会调用`val.__format__('.3f')`.

附加格式说明符使用的表示法叫格式规范微语言.

格式规范微语言为一些内置类型提供了专用的表示代码.

## 数值

### 整数字面量

整数字面量是一串数字序列,例如:`114514`.

以`0b`或`0B`开头的是二进制数字.以`0o`或`0O`开头的数字是八进制数字.以`0x`或`0X`开头的数字是十六进制数字.例如:`0xAb4f`.

十进制数字的开头不能是`0`,例如`0123`是错误的字面量.

可以在数字之间或者在基数说明符后使用`_`分隔.在解释是会将其忽略.例如:`0b_0010_0_11_1`.`_`不能连续使用.

### 浮点数字面量

浮点数字面量可以是包含`.`的数字序列,例如`3.14`,`10.`,`.001`.

使用`e`或`E`表示的浮点数为`前驱数字*10**后继数字`.例如`1e100`,`3.14e-10`,`0e0`.

整数(前驱数字)和指数部分(后继数字)总以10为基数.

整数部分可以是非指数形式的浮点数或者整数.指数部分只能是整数.

数字之间允许使用`_`分隔.例如:`3.14_15_93`

### 虚数字面量

虚数字面量由可选的实部和虚部组成,实部和虚部之间使用`+`连接.实部为整数字面量或者浮点数字面量.虚部为整数字面量或者浮点数字面量并加上`j`.

例如:`3.14j`,`10.j`,`10j`,`.001j`,`1e100j`,`3.14e-10j`,`3.14_15_93j`.





